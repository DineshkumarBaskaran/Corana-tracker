<html>

<head>
	<script type="text/javascript" src=
"https://code.jquery.com/jquery-1.12.0.min.js">
	</script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,
								initial-scale=1">
	<script src=
"https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js">
	</script>
	<title></title>
</head>

<body>

	<canvas id="bar-chart" width="800" height="450">
	</canvas>
	<div>
  <canvas id="myChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
  const ctx = document.getElementById('myChart');

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['Afghanistan', 'Albania', 'Algeria', 'Andorra', 'Angola', 'Antarctica', 'Antigua and Barbuda','Argentina','Armenia','Australia','Australia','Australia','Australia','Australia','Australia','Australia','Australia','Austria','Azerbaijan','	Bahamas','Bahrain','Bangladesh','Barbados','Belarus','Belgium','Belize','Benin','Bhutan','Bolivia','Bosnia and Herzegovina','Botswana','Brazil','Brunei','Bulgaria','Burkina Faso','Burma','Burundi','Cabo Verde','	Cambodia','Cameroon','Canada','	Canada','Canada','Canada','Canada','Canada','Canada','Canada','	Canada','Canada','Canada','Canada','Canada','Canada','Canada','Canada','Central African Republic','Chad','Chile','China','China','China','China','China','china','China','China','China','China','China','China','China','China','China','china','China','China','China','China','China','China','China','China','China','china','China','China','China','China','china','China','China','China','China','China','china','China','China','China','China','China','china','China','China','China','China','China','China','China','China','China','china','China','China','China','China','Colombia','Comoros','Congo (Brazzaville)','Congo (Kinshasa)','Costa Rica','Cote d','Croatia','Cuba','Cyprus','	Czechia','Denmark','Denmark','Denmark','Diamond Princess','Djibouti','Dominica','Dominican Republic','Ecuador','Egypt','El Salvador','Equatorial Guinea','Eritrea','Estonia','Eswatini','Ethiopia','Fiji','Finland','France','France','France','France','France','France','France','France','France','France','	France','France','Gabon','Gambia','Georgia','Germany','Ghana','Greece','Grenada','Guatemala','Guinea','Guinea-Bissau','Guyana','Haiti','Holy See','Honduras','Hungary','Iceland','India','Indonesia','Iran','Iraq','Ireland','Israel','Italy','Jamaica','Japan','Jordan','Kazakhstan','Kenya','Kiribati','Korea, North','Korea, South','Kosovo','Kuwait','Kyrgyzstan','Laos','Latvia','Lebanon','Lesotho','Liberia','Libya','Liechtenstein','Lithuania','Luxembourg','MS Zaandam','	Madagascar','Malawi','Malaysia','Maldives','Mali','Malta','Marshall Islands','Mauritania','	Mauritius','Mexico','Micronesia','Moldova','Monaco','Mongolia','Montenegro','Morocco','Mozambique','Namibia','Nauru','Nepal','Netherlands','Netherlands','Netherlands','Netherlands','Netherlands','New Zealand','New Zealand','New Zealand','Nicaragua','Niger','Nigeria','North Macedonia','Norway','Oman','Pakistan','Palau','Panama','Papua New Guinea','Paraguay','Peru','Philippines','Poland','Portugal','Qatar','Romania','Russia','Rwanda','Saint Kitts and Nevis','Saint Lucia','Saint Vincent and the Grenadines','Samoa','	San Marino','Sao Tome and Principe','Saudi Arabia','Senegal','Serbia','Seychelles','Sierra Leone','	Singapore','Slovakia','Slovenia','Solomon Islands','Somalia','South Africa','South Sudan','	Spain','Sri Lanka','Sudan','Summer Olympics 2020','Suriname','Sweden','Switzerland','Syria','Taiwan*','Tajikistan','Tanzania','Thailand','Timor-Leste','Togo','Tonga','	Trinidad and Tobago','Tunisia','Turkey','Tuvalu','US','Uganda','Ukraine','United Arab Emirates','United Kingdom','United Kingdom','United Kingdom','United Kingdom','United Kingdom','United Kingdom','United Kingdom','United Kingdom','United Kingdom','United Kingdom','United Kingdom','United Kingdom','United Kingdom','United Kingdom','United Kingdom','Uruguay','Uzbekistan','Vanuatu','Venezuela','Vietnam','	West Bank and Gaza','Winter Olympics 2022','Yemen','Zambia','Zimbabwe'],
      datasets: [{
        label: '# of Votes',
        data: [7896, 3598, 6881, 165, 1933, 0, 146,130472,8727,228,6529,91,2783,1365,256,7370,952,21970,10138,833,1553,29445,579,7118,33814,688,163,21,22365,16280,2801,699276,225,38228,396,19490,38,413,3056,1965,5622,5249,1,0,2464,834,318,22,794,7,16234,93,18160,0,1890,32,113,194,64273,7,20,11,2,2,10,2,2,6,7,18,23,13467,4515,4,1,0,2,5,2,121,0,0,5,10,595,1,12,3,0,82195,3,4,1,142339,161,388,1464,9245,834,17987,8530,1330,42491,28,21,8296,13,189,74,4384,36014,24812,4230,183,103,2946,1425,7572,883,8967,413,649,1010,1092,187,314,921,6,2,63,7,161512,306,372,16971,168935,1462,34779,238,20182,467,176,1298,860,0,11111,48762,263,530779,160941,144933,25375,8708,12329,188322,3514,72997,14122,19071,5688,18,6,34093,3211,2570,2991,758,6269,10841,723,295,6437,89,9596,1220,2,1423,2686,36967,311,743,828,17,997,1044,333188,61,12003,67,2136,2808,16296,2242,4090,1,12020,282,41,301,91,22990,2,0,2548,245,315,3155,9662,5213,4628,30644,9,8609,670,19878,219539,66188,119010,26266,688,67736,388478,1468,47,409,123,29,122,77,9618,1971,17881,172,126,1722,21035,7078,153,1361,102595,138,119479,16830,5017,0,1404,23777,14210,3164,17672,125,846,33918,138,290,13,4355,29341,101492,0,1123836,3630,119283,2349,12,160,64,37,0,0,111,66,116,161,8,0,0,38,	219948,7617,1637,14,5854,43186,5708,0,2159,4057,5671],
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
</script>
 
	<script>
	
	function getRandomColor() {
		 let maxVal = 0xFFFFFF; // 16777215
		    let randomNumber = Math.random() * maxVal; 
		    randomNumber = Math.floor(randomNumber);
		    randomNumber = randomNumber.toString(16);
		    let randColor = randomNumber.padStart(6, 0);   
		    return `#${randColor.toUpperCase()}`
	}

	var data_arr = [90, 40, 80, 50, 70];
	var bg_colors = data_arr.map( item => getRandomColor() );
		
	const xmlhttp = new XMLHttpRequest();
	const url = 'http://localhost:8082/collectChartData';
	
	xmlhttp.open('GET', url, true);
	xmlhttp.send();
	
	xmlhttp.onreadystatechange = function() {
		if(this.readyState == 4 && this.status == 200) {
			const datapoints = JSON.parse(this.responseText);
			//console.log(datapoints);
			
			const labelCountry = datapoints.map(
					function(index) {
						return index.country;
					});
			
			const latestTotalDeaths = datapoints.map(
					function(index) {
						return index.latestTotalDeaths;
					});
						
			var ctx = document.getElementById('bar-chart').getContext('2d');
		    var chart = new Chart(ctx, {
		        type: 'bar',
		        data: {
		            labels: labelCountry,
		            datasets: [{
		                label: 'DeathCount',
		                data: latestTotalDeaths,
		                backgroundColor: bg_colors,
		                borderColor: 'black',
		                borderWidth: 1
		            }]
		        },
		        options: {
		            scales: {
		                y: {
		                    beginAtZero: true
		                }
		            }
		        }
		    });
			
		}
				
		
	}

	</script>
</body>

</html>
